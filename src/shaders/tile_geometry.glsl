
#version 460

layout(location = 0) in vec3 color;
layout(location = 1)



/// Ported from `palette` crate
vec3 oklab_to_linear_srgb(vec3 c)
{
    // float l_ = c.x +  0.3963377774 * c.y +  0.2158037573 * c.z;
    
    // float m_ = c.x + -0.1055613458 * c.y + -0.0638541728 * c.z;
    // float s_ = c.x + -0.0894841775 * c.y + -1.2914855480 * c.z;

    vec3 lms_ = mat3(
        1.0000000000,  1.0000000000,  1.0000000000,
        0.3963377774, -0.1055613458, -0.0894841775,
        0.2158037573, -0.0638541728, -1.2914855480,
    ) * c;

    // float l = l_ * l_ * l_;
    // float m = m_ * m_ * m_;
    // float s = s_ * s_ * s_;

    vec3 lms = lms_ * lms_ * lms_;

    // return mat3(
    //      4.0767416621 * l + -3.3077115913 * m +  0.2309699292 * s,
    //     -1.2684380046 * l +  2.6097574011 * m + -0.3413193965 * s,
    //     -0.0041960863 * l + -0.7034186147 * m +  1.7076147010 * s,
    // ) * lms;
    return mat3(
         4.0767416621, -1.2684380046, -0.0041960863,
        -3.3077115913,  2.6097574011, -0.7034186147,
         0.2309699292, -0.7034186147,  1.7076147010,
    ) * lms;
}



void main() {
    gl_Position = vec4(position, 0.0, 1.0);
}
